{"ast":null,"code":"import { useVuelidate } from '@vuelidate/core';\nimport { VueTheMask } from 'vue-the-mask';\nimport axios from 'axios';\nexport default {\n  name: 'CreateRecord',\n  directives: {\n    mask: VueTheMask\n  },\n  data() {\n    return {\n      valid: true,\n      addressValid: true,\n      showAddressForm: false,\n      // Controle de visibilidade do formulário de endereço\n      record: {\n        name: '',\n        social_name: '',\n        cpf: '',\n        father_name: '',\n        mother_name: '',\n        phone: '',\n        email: ''\n      },\n      address: {\n        registration_id: null,\n        type: '',\n        cep: '',\n        street: '',\n        number: '',\n        complement: '',\n        neighborhood: '',\n        state: '',\n        city: ''\n      },\n      errorMessage: '',\n      addressErrorMessage: '',\n      rules: {\n        required: value => !!value || 'Campo obrigatório.',\n        email: value => /.+@.+\\..+/.test(value) || 'E-mail deve ser válido.',\n        cpf: value => /^\\d{3}\\.\\d{3}\\.\\d{3}-\\d{2}$/.test(value) || 'CPF deve ser válido.',\n        phone: value => /^\\(\\d{2}\\) \\d{4,5}-\\d{4}$/.test(value) || 'Telefone deve ser válido.'\n      }\n    };\n  },\n  setup() {\n    return {\n      v$: useVuelidate()\n    };\n  },\n  methods: {\n    submitData() {\n      axios.post('/registrations', this.record).then(response => {\n        this.showAddressForm = true;\n        this.address.registration_id = response.data.data.id;\n      }).catch(error => {\n        if (error.response) {\n          this.errorMessage = error.response.data.message || 'Erro ao submeter os dados.';\n        } else if (error.request) {\n          this.errorMessage = 'Nenhuma resposta recebida do servidor.';\n        } else {\n          this.errorMessage = 'Erro ao configurar a requisição: ' + error.message;\n        }\n      });\n    },\n    submitAddress() {\n      axios.post('/addresses', this.address).then(() => {\n        // Tratar sucesso do endereço\n      }).catch(error => {\n        if (error.response) {\n          this.addressErrorMessage = error.response.data.message || 'Erro ao submeter os dados.';\n        } else if (error.request) {\n          this.addressErrorMessage = 'Nenhuma resposta recebida do servidor.';\n        } else {\n          this.addressErrorMessage = 'Erro ao configurar a requisição: ' + error.message;\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["useVuelidate","VueTheMask","axios","name","directives","mask","data","valid","addressValid","showAddressForm","record","social_name","cpf","father_name","mother_name","phone","email","address","registration_id","type","cep","street","number","complement","neighborhood","state","city","errorMessage","addressErrorMessage","rules","required","value","test","setup","v$","methods","submitData","post","then","response","id","catch","error","message","request","submitAddress"],"sources":["C:\\Users\\Davi\\PRODEMGE1\\frontend\\src\\components\\CreateRecord.vue"],"sourcesContent":["<template>\r\n  <v-container>\r\n    <v-form ref=\"form\" v-model=\"valid\" lazy-validation>\r\n      <v-row>\r\n        <v-col cols=\"12\" md=\"6\">\r\n          <v-text-field\r\n            v-model=\"record.name\"\r\n            label=\"Nome\"\r\n            :rules=\"[rules.required]\"\r\n            outlined\r\n            dense\r\n          ></v-text-field>\r\n        </v-col>\r\n        <v-col cols=\"12\" md=\"6\">\r\n          <v-text-field\r\n            v-model=\"record.social_name\"\r\n            label=\"Nome Social\"\r\n            outlined\r\n            dense\r\n          ></v-text-field>\r\n        </v-col>\r\n      </v-row>\r\n      <v-row>\r\n        <v-col cols=\"12\" md=\"6\">\r\n          <v-text-field\r\n            v-model=\"record.cpf\"\r\n            label=\"CPF\"\r\n            :rules=\"[rules.required, rules.cpf]\"\r\n            outlined\r\n            dense\r\n            v-mask=\"'###.###.###-##'\"\r\n          ></v-text-field>\r\n        </v-col>\r\n        <v-col cols=\"12\" md=\"6\">\r\n          <v-text-field\r\n            v-model=\"record.phone\"\r\n            label=\"Telefone\"\r\n            :rules=\"[rules.required, rules.phone]\"\r\n            outlined\r\n            dense\r\n            v-mask=\"'(##) #####-####'\"\r\n          ></v-text-field>\r\n        </v-col>\r\n      </v-row>\r\n      <v-row>\r\n        <v-col cols=\"12\" md=\"6\">\r\n          <v-text-field\r\n            v-model=\"record.father_name\"\r\n            label=\"Nome do Pai\"\r\n            outlined\r\n            dense\r\n          ></v-text-field>\r\n        </v-col>\r\n        <v-col cols=\"12\" md=\"6\">\r\n          <v-text-field\r\n            v-model=\"record.mother_name\"\r\n            label=\"Nome da Mãe\"\r\n            outlined\r\n            dense\r\n          ></v-text-field>\r\n        </v-col>\r\n      </v-row>\r\n      <v-row>\r\n        <v-col cols=\"12\" md=\"6\">\r\n          <v-text-field\r\n            v-model=\"record.email\"\r\n            label=\"Email\"\r\n            :rules=\"[rules.required, rules.email]\"\r\n            outlined\r\n            dense\r\n          ></v-text-field>\r\n        </v-col>\r\n        <v-col cols=\"12\" md=\"6\" class=\"d-flex align-end justify-end\">\r\n          <v-btn :disabled=\"!valid\" color=\"success\" @click=\"submitData\">Salvar</v-btn>\r\n        </v-col>\r\n      </v-row>\r\n      <v-alert v-if=\"errorMessage\" type=\"error\">{{ errorMessage }}</v-alert>\r\n    </v-form>\r\n\r\n    <!-- Nova seção para adicionar endereço -->\r\n    <v-form ref=\"addressForm\" v-if=\"showAddressForm\" v-model=\"addressValid\" lazy-validation>\r\n      <v-divider class=\"my-4\"></v-divider>\r\n      <h3>Adicionar Endereço</h3>\r\n      <v-row>\r\n        <v-col cols=\"12\" md=\"6\">\r\n          <v-select\r\n            v-model=\"address.type\"\r\n            :items=\"['residencial', 'comercial']\"\r\n            label=\"Tipo\"\r\n            :rules=\"[rules.required]\"\r\n            outlined\r\n            dense\r\n          ></v-select>\r\n        </v-col>\r\n        <v-col cols=\"12\" md=\"6\">\r\n          <v-text-field\r\n            v-model=\"address.cep\"\r\n            label=\"CEP\"\r\n            :rules=\"[rules.required]\"\r\n            outlined\r\n            dense\r\n          ></v-text-field>\r\n        </v-col>\r\n      </v-row>\r\n      <v-row>\r\n        <v-col cols=\"12\" md=\"6\">\r\n          <v-text-field\r\n            v-model=\"address.street\"\r\n            label=\"Rua\"\r\n            :rules=\"[rules.required]\"\r\n            outlined\r\n            dense\r\n          ></v-text-field>\r\n        </v-col>\r\n        <v-col cols=\"12\" md=\"6\">\r\n          <v-text-field\r\n            v-model=\"address.number\"\r\n            label=\"Número\"\r\n            :rules=\"[rules.required]\"\r\n            outlined\r\n            dense\r\n          ></v-text-field>\r\n        </v-col>\r\n      </v-row>\r\n      <v-row>\r\n        <v-col cols=\"12\" md=\"6\">\r\n          <v-text-field\r\n            v-model=\"address.complement\"\r\n            label=\"Complemento\"\r\n            outlined\r\n            dense\r\n          ></v-text-field>\r\n        </v-col>\r\n        <v-col cols=\"12\" md=\"6\">\r\n          <v-text-field\r\n            v-model=\"address.neighborhood\"\r\n            label=\"Bairro\"\r\n            :rules=\"[rules.required]\"\r\n            outlined\r\n            dense\r\n          ></v-text-field>\r\n        </v-col>\r\n      </v-row>\r\n      <v-row>\r\n        <v-col cols=\"12\" md=\"6\">\r\n          <v-text-field\r\n            v-model=\"address.state\"\r\n            label=\"Estado\"\r\n            :rules=\"[rules.required]\"\r\n            outlined\r\n            dense\r\n          ></v-text-field>\r\n        </v-col>\r\n        <v-col cols=\"12\" md=\"6\">\r\n          <v-text-field\r\n            v-model=\"address.city\"\r\n            label=\"Cidade\"\r\n            :rules=\"[rules.required]\"\r\n            outlined\r\n            dense\r\n          ></v-text-field>\r\n        </v-col>\r\n      </v-row>\r\n      <v-row>\r\n        <v-col cols=\"12\" class=\"d-flex align-end justify-end\">\r\n          <v-btn :disabled=\"!addressValid\" color=\"success\" @click=\"submitAddress\">Salvar Endereço</v-btn>\r\n        </v-col>\r\n      </v-row>\r\n      <v-alert v-if=\"addressErrorMessage\" type=\"error\">{{ addressErrorMessage }}</v-alert>\r\n    </v-form>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport { useVuelidate } from '@vuelidate/core';\r\nimport { VueTheMask } from 'vue-the-mask';\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  name: 'CreateRecord',\r\n  directives: {\r\n    mask: VueTheMask\r\n  },\r\n  data() {\r\n    return {\r\n      valid: true,\r\n      addressValid: true,\r\n      showAddressForm: false, // Controle de visibilidade do formulário de endereço\r\n      record: {\r\n        name: '',\r\n        social_name: '',\r\n        cpf: '',\r\n        father_name: '',\r\n        mother_name: '',\r\n        phone: '',\r\n        email: ''\r\n      },\r\n      address: {\r\n        registration_id: null,\r\n        type: '',\r\n        cep: '',\r\n        street: '',\r\n        number: '',\r\n        complement: '',\r\n        neighborhood: '',\r\n        state: '',\r\n        city: ''\r\n      },\r\n      errorMessage: '',\r\n      addressErrorMessage: '',\r\n      rules: {\r\n        required: value => !!value || 'Campo obrigatório.',\r\n        email: value => /.+@.+\\..+/.test(value) || 'E-mail deve ser válido.',\r\n        cpf: value => /^\\d{3}\\.\\d{3}\\.\\d{3}-\\d{2}$/.test(value) || 'CPF deve ser válido.',\r\n        phone: value => /^\\(\\d{2}\\) \\d{4,5}-\\d{4}$/.test(value) || 'Telefone deve ser válido.',\r\n      }\r\n    };\r\n  },\r\n  setup() {\r\n    return { v$: useVuelidate() };\r\n  },\r\n  methods: {\r\n    submitData() {\r\n      axios.post('/registrations', this.record)\r\n        .then(response => {\r\n          this.showAddressForm = true;\r\n          this.address.registration_id = response.data.data.id;\r\n        })\r\n        .catch(error => {\r\n          if (error.response) {\r\n            this.errorMessage = error.response.data.message || 'Erro ao submeter os dados.';\r\n          } else if (error.request) {\r\n            this.errorMessage = 'Nenhuma resposta recebida do servidor.';\r\n          } else {\r\n            this.errorMessage = 'Erro ao configurar a requisição: ' + error.message;\r\n          }\r\n        });\r\n    },\r\n    submitAddress() {\r\n      axios.post('/addresses', this.address)\r\n        .then(() => {\r\n          // Tratar sucesso do endereço\r\n        })\r\n        .catch(error => {\r\n          if (error.response) {\r\n            this.addressErrorMessage = error.response.data.message || 'Erro ao submeter os dados.';\r\n          } else if (error.request) {\r\n            this.addressErrorMessage = 'Nenhuma resposta recebida do servidor.';\r\n          } else {\r\n            this.addressErrorMessage = 'Erro ao configurar a requisição: ' + error.message;\r\n          }\r\n        });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n/* Estilos adicionais, se necessário */\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}