{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { useVuelidate } from '@vuelidate/core';\nimport { VueTheMask } from 'vue-the-mask';\nimport axios from 'axios';\nexport default {\n  name: 'CreateRecord',\n  directives: {\n    mask: VueTheMask\n  },\n  data() {\n    return {\n      valid: true,\n      addressValid: true,\n      showAddressForm: false,\n      record: {\n        name: '',\n        social_name: '',\n        cpf: '',\n        father_name: '',\n        mother_name: '',\n        phone: '',\n        email: ''\n      },\n      address: {\n        registration_id: null,\n        type: '',\n        cep: '',\n        street: '',\n        number: '',\n        complement: '',\n        neighborhood: '',\n        state: '',\n        city: ''\n      },\n      errorMessage: '',\n      addressErrorMessage: '',\n      rules: {\n        required: value => !!value || 'Campo obrigatório.',\n        email: value => /.+@.+\\..+/.test(value) || 'E-mail deve ser válido.',\n        cpf: value => /^\\d{3}\\.\\d{3}\\.\\d{3}-\\d{2}$/.test(value) || 'CPF deve ser válido.',\n        phone: value => /^\\(\\d{2}\\) \\d{4,5}-\\d{4}$/.test(value) || 'Telefone deve ser válido.'\n      }\n    };\n  },\n  setup() {\n    return {\n      v$: useVuelidate()\n    };\n  },\n  methods: {\n    submitData() {\n      axios.post('/registrations', this.record).then(response => {\n        this.showAddressForm = true;\n        this.address.registration_id = response.data.data.id;\n      }).catch(error => {\n        if (error.response) {\n          if (error.response.status === 400) {\n            this.errorMessage = error.response.data.message || 'Erro ao submeter os dados.';\n          } else if (error.response.status === 422) {\n            this.errorMessage = Object.values(error.response.data.errors).join(' ');\n          } else {\n            this.errorMessage = 'Erro desconhecido. Tente novamente mais tarde.';\n          }\n        } else if (error.request) {\n          this.errorMessage = 'Nenhuma resposta recebida do servidor.';\n        } else {\n          this.errorMessage = 'Erro ao configurar a requisição: ' + error.message;\n        }\n      });\n    },\n    submitAddress() {\n      axios.post('/addresses', this.address).then(() => {\n        this.$router.push({\n          name: 'SearchPage'\n        });\n      }).catch(error => {\n        if (error.response) {\n          if (error.response.status === 400) {\n            this.addressErrorMessage = error.response.data.message || 'Erro ao submeter os dados.';\n          } else if (error.response.status === 422) {\n            this.addressErrorMessage = Object.values(error.response.data.errors).join(' ');\n          } else {\n            this.addressErrorMessage = 'Erro desconhecido. Tente novamente mais tarde.';\n          }\n        } else if (error.request) {\n          this.addressErrorMessage = 'Nenhuma resposta recebida do servidor.';\n        } else {\n          this.addressErrorMessage = 'Erro ao configurar a requisição: ' + error.message;\n        }\n      });\n    },\n    fetchAddress() {\n      if (this.address.cep.length === 8) {\n        axios.get(`/proxy/viacep/${this.address.cep}`).then(response => {\n          if (response.data.erro) {\n            this.addressErrorMessage = 'CEP não encontrado.';\n          } else {\n            this.address.street = response.data.logradouro;\n            this.address.neighborhood = response.data.bairro;\n            this.address.city = response.data.localidade;\n            this.address.state = response.data.uf;\n            this.addressErrorMessage = '';\n          }\n        }).catch(() => {\n          this.addressErrorMessage = 'Erro ao buscar o endereço. Verifique o CEP e tente novamente.';\n        });\n      } else {\n        this.addressErrorMessage = 'CEP deve conter 8 dígitos.';\n      }\n    }\n  }\n};","map":{"version":3,"names":["useVuelidate","VueTheMask","axios","name","directives","mask","data","valid","addressValid","showAddressForm","record","social_name","cpf","father_name","mother_name","phone","email","address","registration_id","type","cep","street","number","complement","neighborhood","state","city","errorMessage","addressErrorMessage","rules","required","value","test","setup","v$","methods","submitData","post","then","response","id","catch","error","status","message","Object","values","errors","join","request","submitAddress","$router","push","fetchAddress","length","get","erro","logradouro","bairro","localidade","uf"],"sources":["C:\\Users\\Davi\\PRODEMGE1\\frontend\\src\\components\\CreateRecord.vue"],"sourcesContent":["<template>\r\n  <v-container>\r\n    <v-form ref=\"form\" v-model=\"valid\" lazy-validation>\r\n      <v-row>\r\n        <v-col cols=\"12\" md=\"6\">\r\n          <v-text-field\r\n            v-model=\"record.name\"\r\n            label=\"Nome\"\r\n            :rules=\"[rules.required]\"\r\n            outlined\r\n            dense\r\n          ></v-text-field>\r\n        </v-col>\r\n        <v-col cols=\"12\" md=\"6\">\r\n          <v-text-field\r\n            v-model=\"record.social_name\"\r\n            label=\"Nome Social\"\r\n            outlined\r\n            dense\r\n          ></v-text-field>\r\n        </v-col>\r\n      </v-row>\r\n      <v-row>\r\n        <v-col cols=\"12\" md=\"6\">\r\n          <v-text-field\r\n            v-model=\"record.cpf\"\r\n            label=\"CPF\"\r\n            :rules=\"[rules.required, rules.cpf]\"\r\n            outlined\r\n            dense\r\n            v-mask=\"'###.###.###-##'\"\r\n          ></v-text-field>\r\n        </v-col>\r\n        <v-col cols=\"12\" md=\"6\">\r\n          <v-text-field\r\n            v-model=\"record.phone\"\r\n            label=\"Telefone\"\r\n            :rules=\"[rules.required, rules.phone]\"\r\n            outlined\r\n            dense\r\n            v-mask=\"'(##) #####-####'\"\r\n          ></v-text-field>\r\n        </v-col>\r\n      </v-row>\r\n      <v-row>\r\n        <v-col cols=\"12\" md=\"6\">\r\n          <v-text-field\r\n            v-model=\"record.father_name\"\r\n            label=\"Nome do Pai\"\r\n            outlined\r\n            dense\r\n          ></v-text-field>\r\n        </v-col>\r\n        <v-col cols=\"12\" md=\"6\">\r\n          <v-text-field\r\n            v-model=\"record.mother_name\"\r\n            label=\"Nome da Mãe\"\r\n            outlined\r\n            dense\r\n          ></v-text-field>\r\n        </v-col>\r\n      </v-row>\r\n      <v-row>\r\n        <v-col cols=\"12\" md=\"6\">\r\n          <v-text-field\r\n            v-model=\"record.email\"\r\n            label=\"Email\"\r\n            :rules=\"[rules.required, rules.email]\"\r\n            outlined\r\n            dense\r\n          ></v-text-field>\r\n        </v-col>\r\n        <v-col cols=\"12\" md=\"6\" class=\"d-flex align-end justify-end\">\r\n          <v-btn :disabled=\"!valid\" color=\"success\" @click=\"submitData\">Salvar</v-btn>\r\n        </v-col>\r\n      </v-row>\r\n      <v-alert v-if=\"errorMessage\" type=\"error\">{{ errorMessage }}</v-alert>\r\n    </v-form>\r\n\r\n    <v-form ref=\"addressForm\" v-if=\"showAddressForm\" v-model=\"addressValid\" lazy-validation>\r\n      <v-divider class=\"my-4\"></v-divider>\r\n      <h3>Adicionar Endereço</h3>\r\n      <v-row>\r\n        <v-col cols=\"12\" md=\"6\">\r\n          <v-select\r\n            v-model=\"address.type\"\r\n            :items=\"['residential', 'comercial']\"\r\n            label=\"Tipo\"\r\n            :rules=\"[rules.required]\"\r\n            outlined\r\n            dense\r\n          ></v-select>\r\n        </v-col>\r\n        <v-col cols=\"12\" md=\"6\">\r\n          <v-text-field\r\n            v-model=\"address.cep\"\r\n            label=\"CEP\"\r\n            :rules=\"[rules.required]\"\r\n            outlined\r\n            dense\r\n            @blur=\"fetchAddress\"\r\n          ></v-text-field>\r\n        </v-col>\r\n      </v-row>\r\n      <v-row>\r\n        <v-col cols=\"12\" md=\"6\">\r\n          <v-text-field\r\n            v-model=\"address.street\"\r\n            label=\"Rua\"\r\n            :rules=\"[rules.required]\"\r\n            outlined\r\n            dense\r\n          ></v-text-field>\r\n        </v-col>\r\n        <v-col cols=\"12\" md=\"6\">\r\n          <v-text-field\r\n            v-model=\"address.number\"\r\n            label=\"Número\"\r\n            :rules=\"[rules.required]\"\r\n            outlined\r\n            dense\r\n          ></v-text-field>\r\n        </v-col>\r\n      </v-row>\r\n      <v-row>\r\n        <v-col cols=\"12\" md=\"6\">\r\n          <v-text-field\r\n            v-model=\"address.complement\"\r\n            label=\"Complemento\"\r\n            outlined\r\n            dense\r\n          ></v-text-field>\r\n        </v-col>\r\n        <v-col cols=\"12\" md=\"6\">\r\n          <v-text-field\r\n            v-model=\"address.neighborhood\"\r\n            label=\"Bairro\"\r\n            :rules=\"[rules.required]\"\r\n            outlined\r\n            dense\r\n          ></v-text-field>\r\n        </v-col>\r\n      </v-row>\r\n      <v-row>\r\n        <v-col cols=\"12\" md=\"6\">\r\n          <v-text-field\r\n            v-model=\"address.state\"\r\n            label=\"Estado\"\r\n            :rules=\"[rules.required]\"\r\n            outlined\r\n            dense\r\n          ></v-text-field>\r\n        </v-col>\r\n        <v-col cols=\"12\" md=\"6\">\r\n          <v-text-field\r\n            v-model=\"address.city\"\r\n            label=\"Cidade\"\r\n            :rules=\"[rules.required]\"\r\n            outlined\r\n            dense\r\n          ></v-text-field>\r\n        </v-col>\r\n      </v-row>\r\n      <v-row>\r\n        <v-col cols=\"12\" class=\"d-flex align-end justify-end\">\r\n          <v-btn :disabled=\"!addressValid\" color=\"success\" @click=\"submitAddress\">Salvar Endereço</v-btn>\r\n        </v-col>\r\n      </v-row>\r\n      <v-alert v-if=\"addressErrorMessage\" type=\"error\">{{ addressErrorMessage }}</v-alert>\r\n    </v-form>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport { useVuelidate } from '@vuelidate/core';\r\nimport { VueTheMask } from 'vue-the-mask';\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  name: 'CreateRecord',\r\n  directives: {\r\n    mask: VueTheMask\r\n  },\r\n  data() {\r\n    return {\r\n      valid: true,\r\n      addressValid: true,\r\n      showAddressForm: false,\r\n      record: {\r\n        name: '',\r\n        social_name: '',\r\n        cpf: '',\r\n        father_name: '',\r\n        mother_name: '',\r\n        phone: '',\r\n        email: ''\r\n      },\r\n      address: {\r\n        registration_id: null,\r\n        type: '',\r\n        cep: '',\r\n        street: '',\r\n        number: '',\r\n        complement: '',\r\n        neighborhood: '',\r\n        state: '',\r\n        city: ''\r\n      },\r\n      errorMessage: '',\r\n      addressErrorMessage: '',\r\n      rules: {\r\n        required: value => !!value || 'Campo obrigatório.',\r\n        email: value => /.+@.+\\..+/.test(value) || 'E-mail deve ser válido.',\r\n        cpf: value => /^\\d{3}\\.\\d{3}\\.\\d{3}-\\d{2}$/.test(value) || 'CPF deve ser válido.',\r\n        phone: value => /^\\(\\d{2}\\) \\d{4,5}-\\d{4}$/.test(value) || 'Telefone deve ser válido.',\r\n      }\r\n    };\r\n  },\r\n  setup() {\r\n    return { v$: useVuelidate() };\r\n  },\r\n  methods: {\r\n    submitData() {\r\n      axios.post('/registrations', this.record)\r\n        .then(response => {\r\n          this.showAddressForm = true;\r\n          this.address.registration_id = response.data.data.id;\r\n        })\r\n        .catch(error => {\r\n          if (error.response) {\r\n            if (error.response.status === 400) {\r\n              this.errorMessage = error.response.data.message || 'Erro ao submeter os dados.';\r\n            } else if (error.response.status === 422) {\r\n              this.errorMessage = Object.values(error.response.data.errors).join(' ');\r\n            } else {\r\n              this.errorMessage = 'Erro desconhecido. Tente novamente mais tarde.';\r\n            }\r\n          } else if (error.request) {\r\n            this.errorMessage = 'Nenhuma resposta recebida do servidor.';\r\n          } else {\r\n            this.errorMessage = 'Erro ao configurar a requisição: ' + error.message;\r\n          }\r\n        });\r\n    },\r\n    submitAddress() {\r\n      axios.post('/addresses', this.address)\r\n        .then(() => {\r\n          this.$router.push({ name: 'SearchPage' });\r\n        })\r\n        .catch(error => {\r\n          if (error.response) {\r\n            if (error.response.status === 400) {\r\n              this.addressErrorMessage = error.response.data.message || 'Erro ao submeter os dados.';\r\n            } else if (error.response.status === 422) {\r\n              this.addressErrorMessage = Object.values(error.response.data.errors).join(' ');\r\n            } else {\r\n              this.addressErrorMessage = 'Erro desconhecido. Tente novamente mais tarde.';\r\n            }\r\n          } else if (error.request) {\r\n            this.addressErrorMessage = 'Nenhuma resposta recebida do servidor.';\r\n          } else {\r\n            this.addressErrorMessage = 'Erro ao configurar a requisição: ' + error.message;\r\n          }\r\n        });\r\n    },\r\n    fetchAddress() {\r\n      if (this.address.cep.length === 8) {\r\n        axios.get(`/proxy/viacep/${this.address.cep}`)\r\n          .then(response => {\r\n            if (response.data.erro) {\r\n              this.addressErrorMessage = 'CEP não encontrado.';\r\n            } else {\r\n              this.address.street = response.data.logradouro;\r\n              this.address.neighborhood = response.data.bairro;\r\n              this.address.city = response.data.localidade;\r\n              this.address.state = response.data.uf;\r\n              this.addressErrorMessage = '';\r\n            }\r\n          })\r\n          .catch(() => {\r\n            this.addressErrorMessage = 'Erro ao buscar o endereço. Verifique o CEP e tente novamente.';\r\n          });\r\n      } else {\r\n        this.addressErrorMessage = 'CEP deve conter 8 dígitos.';\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}